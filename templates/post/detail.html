{% extends 'base.html' %} {% block title %}상세 페이지 - Jungle Helper{%
endblock %} {% block extra_css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/detail.css') }}"
/>
{% endblock %} {% block content %}
<div class="detail-page">
  <div class="detail-content">
    <!-- 이미지 -->
    <div class="image-box">
      <img
        src="{{ post.image_url or url_for('static', filename='images/logo2.png') }}"
        alt="대표 이미지"
      />
    </div>

    <!-- 게시글 정보 -->
    <div class="info-box">
      <h1 class="title">{{ post.title }}</h1>
      <div class="badges">
        <span class="badge category">{{ post.category }}</span>
        <span class="badge status"
          >{{ '완료' if not post.status else '진행중' }}</span
        >
      </div>
      <p class="price">{{ post.price if post.price else '무료나눔' }}</p>
      <p class="description">{{ post.description }}</p>
      <p class="author">{{ post.nick_name }}</p>
      <p class="date">{{ post.created_at }}</p>

      {% if post.isAuthor %}
      <div class="actions">
        <button class="modify-btn">수정</button>
        <button class="delete-btn">삭제</button>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- 댓글 -->
  <section class="comments">
    <h2>댓글</h2>

    <!-- 댓글 작성 -->
    <form class="comment-form">
      <textarea placeholder="댓글을 입력하세요..."></textarea>
      <button type="submit">댓글 작성</button>
    </form>

    <!-- 댓글 리스트 -->
    <ul class="comment-list">
      {% for comment in comments %}
      <li class="comment">
        <div class="comment-wrp">
          <div class="comment-header">
            <span class="nickname">
              {% if comment.isAuthor %}<strong>작성자</strong>{% else %}{{
              comment.writer }}{% endif %}
            </span>
            <span class="date">{{ comment.created_at }}</span>
          </div>
          <p class="comment-content">{{ comment.content }}</p>
        </div>

        <!-- 답글 버튼 -->
        <button class="toggle-reply">답글</button>

        <!-- 답글 입력 -->
        <form class="reply-form hidden">
          <input type="text" placeholder="답글 입력" />
          <button type="submit">답글</button>
        </form>

        <!-- 대댓글 리스트 -->
        <ul class="replies">
          {% for reply in comment.replies %}
          <li class="reply">
            <span class="nickname">
              {% if reply.isAuthor %}<strong>작성자</strong>{% else %}{{
              reply.writer }}{% endif %}
            </span>
            <p class="reply-content">{{ reply.content }}</p>
            <span class="date">{{ reply.created_at }}</span>
          </li>
          {% endfor %}
        </ul>
      </li>
      {% endfor %}
    </ul>
  </section>
</div>
{% endblock %} {% block extra_js %}
<script>
  document.querySelectorAll(".toggle-reply").forEach((btn) => {
    btn.addEventListener("click", () => {
      const replyForm = btn.nextElementSibling;
      replyForm.classList.toggle("hidden");
    });
  });
</script>
{% endblock %}
